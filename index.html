<html>
<head>
    <title>SG Mahjong (beta)</title>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <style>
        canvas {
            border: 10px solid olive;
            image-rendering: auto;
        }

        .alert {
            width: 50%;
            text-align: center;
            margin-top: 30px;
            align-items: center;
        }
        #box {
            width: 16em;
            height: 600px;
            padding: 1em;
            margin-left: 2em;
            border: 3px solid grey;
            background-color: #fff;
            overflow: auto;
            direction: ltr;
            text-align: left;
            display:none;
        }

    </style>
</head>
<body style="width:100%; text-align:center;">
    <!--to preload images such that ctx.drawImage can access-->
    <div class="hidden">
        <script>
            var images = new Array()
            function preload() {
                for (var i = 0; i < preload.arguments.length; i++) {
                    images[i] = new Image()
                    images[i].src = preload.arguments[i]
                }
            }
            preload(
                "https://i.imgur.com/fQYZ50A.jpg",
                "https://i.imgur.com/fAjzPCN.jpg",
                "https://i.imgur.com/F2Iabom.jpg", //1 tong
                "https://i.imgur.com/yy8rOso.jpg", // 2 tong
                "https://i.imgur.com/nBWx2L5.jpg?1", //3 tong
                "https://i.imgur.com/XxV71aU.jpg", //4 tong
                "https://i.imgur.com/Wpq2Vfz.jpg",
                "https://i.imgur.com/flnw1k7.jpg",
                "https://i.imgur.com/VfoM6uE.jpg",
                "https://i.imgur.com/ovcMOBv.jpg",
                "https://i.imgur.com/pGRXQir.jpg",
                "https://i.imgur.com/U0sbrp8.jpg",
                "https://i.imgur.com/yUtgxhv.jpg",
                "https://i.imgur.com/Unn1FWK.jpg",
                "https://i.imgur.com/HAeaaJf.jpg",
                "https://i.imgur.com/wr9ztQV.jpg",
                "https://i.imgur.com/3Z4s2LY.jpg",
                "https://i.imgur.com/VtdKkOg.jpg",
                "https://i.imgur.com/RaHY0Vd.jpg",
                "https://i.imgur.com/9Qa81TW.jpg",
                "https://i.imgur.com/TectSSH.jpg",
                "https://i.imgur.com/0R4Hko8.jpg",
                "https://i.imgur.com/3QbDQwp.jpg",
                "https://i.imgur.com/fEPdyV3.jpg",
                "https://i.imgur.com/3llhfHn.jpg",
                "https://i.imgur.com/4xXLoIB.jpg",
                "https://i.imgur.com/zQNJWZu.jpg",
                "https://i.imgur.com/hkMqown.jpg",
                "https://i.imgur.com/Vt4ntp0.jpg",
                "https://i.imgur.com/p9ZzR1i.jpg",//blue 1 hua
                "https://i.imgur.com/gojre8z.jpg",
                "https://i.imgur.com/xgiq5S4.jpg",
                "https://i.imgur.com/II1Zpu6.jpg",
                "https://i.imgur.com/e55HzyY.jpg",//red 1 hua
                "https://i.imgur.com/GfwFNNh.jpg",
                "https://i.imgur.com/fMiydl0.jpg",
                "https://i.imgur.com/a9kTmiP.jpg",
                "https://i.imgur.com/llgZCnS.jpg",//cat
                "https://i.imgur.com/3ZO6OyM.jpg",//mouse
                "https://i.imgur.com/Eyu71uZ.jpg",//caterpillar
                "https://i.imgur.com/wKGcLpJ.jpg",//chicken
                "https://i.imgur.com/zkW2o1M.jpg", //dong
                "https://i.imgur.com/CkXhk0z.jpg", //nan
                "https://i.imgur.com/jIFp2jx.jpg", //xi
                "https://i.imgur.com/yY3At8n.jpg", //bei
                "https://i.imgur.com/svSegpB.jpg",//green dragon
                "https://i.imgur.com/T9pXe4X.jpg", //red dragon
                "https://i.imgur.com/Z3rj0Rh.jpg",//white dragon
                "https://i.imgur.com/AJILDJK.png", //red_circle for discard
                "https://i.imgur.com/F6sLXgI.jpg", //red dice vertical
                "https://i.imgur.com/MwyWA0v.jpg", //red dice horizontal
                "https://i.imgur.com/JVLuJRW.png", //small board for peng notif
                "https://i.imgur.com/KYGTz6v.png", //small board for chi notif
                "https://i.imgur.com/c6Ee1GG.jpg" //gang notif

            )
        </script>
    </div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/">SG Mahjong (beta)</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Scoring
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item">
                            Currently is all pay, future updates may bring about the option for shooter pay
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">1 台 = 20 points</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">
                            Currently only these are supported:<br />
                            碰碰胡 - 2 台<br />
                            半色 - 2 台<br />
                            一色 - 4 台<br />
                            臭平胡 - 1 台<br />
                            平胡 - 4 台<br />
                            混老头 - 2 台<br />
                            清老头 - 4 台<br />
                            十三幺 - 5 台<br />
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">
                            *咬到 - 10 points<br />
                            *正花 - 10 points<br />
                            *一台花 - 10 points<br />
                            *明杠 - 10 points<br />
                            *暗杠 - 20 points<br />
                            *Calculated at the end of a round<br />
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">For any feedback/issues, please email us at mahjongsgbeta@gmail.com</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Controls
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#">
                            1-1st Tile Discard <br />
                            2-2nd Tile Discard<br />
                            3-3rd Tile Discard<br />
                            4-4th Tile Discard<br />
                            5-5th Tile Discard<br />
                            6-6th Tile Discard<br />
                            7-7th Tile Discard<br />
                            8-8th Tile Discard<br />
                            9-9th Tile Discard<br />
                            0-10th Tile Discard<br />
                            Q-11th Tile Discard<br />
                            W-12th Tile Discard<br />
                            E-13th Tile Discard<br />
                            R-14th Tile Discard<br />
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">P - 碰 (if valid)<br /></a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">G - 槓 (if valid)<br /></a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">
                            Z - 吃. Take Discard Tile, use as left (6 discarded, forms 678)<br />
                            X - 吃. Take Discard Tile, use as middle (7 discarded, forms 678)<br />
                            C - 吃. Take Discard Tile, use as right (8 discarded, forms 678)<br /><br />
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item"> H - 胡 (if valid)<br /></a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">Please click on the mahjong board after chatting to register your inputs.</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div style="text-align: center; display: none; padding-top: 20px; margin: auto;" id="canvas_block" onclick="listen_inputs()">
        <canvas id="myCanvas"></canvas>
    </div>
    <div id="box">
        <p id="chat">
            Chat with the room! <br />
            ---------------------------------
        </p>
        <form onsubmit="chat(); return false;">
            <input type="text" id="chat_text" placeholder="Chat" onclick="ignore_inputs()" size="15" />
            <input type="submit" value="Chat" />
        </form>
    </div>
    
    <div style="text-align: center; display: inline-block; padding-top:20px; margin:auto;" id="name_block">
        <form onsubmit="greet(); return false;">
            <input type="text" , id="name" placeholder="Your name/alias" />
            <input type="submit" />
        </form>
    </div>


    <div class="row justify-content-center">
        <div class="col-auto">
            <table class="table" style="text-align:center; display:inline-block; margin:auto;" id="table_block">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Room Number</th>
                        <th scope="col">Room type</th>
                        <th scope="col">No. of players</th>
                        <th scope="col">Player names</th>
                        <th scope="col"> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">1</th>
                        <td>Fast</td>
                        <td id="1_num">0</td>
                        <td id="1_names">-</td>
                        <td><button id="1_button" onclick="join('1', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">2</th>
                        <td>Fast</td>
                        <td id="2_num">0</td>
                        <td id="2_names">-</td>
                        <td><button id="2_button" onclick="join('2', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">3</th>
                        <td>Fast</td>
                        <td id="3_num">0</td>
                        <td id="3_names">-</td>
                        <td><button id="3_button" onclick="join('3', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">4</th>
                        <td>Fast</td>
                        <td id="4_num">0</td>
                        <td id="4_names">-</td>
                        <td><button id="4_button" onclick="join('4', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">5</th>
                        <td>Fast</td>
                        <td id="5_num">0</td>
                        <td id="5_names">-</td>
                        <td><button id="5_button" onclick="join('5', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">6</th>
                        <td>Fast</td>
                        <td id="6_num">0</td>
                        <td id="6_names">-</td>
                        <td><button id="6_button" onclick="join('6', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">7</th>
                        <td>Fast</td>
                        <td id="7_num">0</td>
                        <td id="7_names">-</td>
                        <td><button id="7_button" onclick="join('7', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">8</th>
                        <td>Fast</td>
                        <td id="8_num">0</td>
                        <td id="8_names">-</td>
                        <td><button id="8_button" onclick="join('8', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">9</th>
                        <td>Fast</td>
                        <td id="9_num">0</td>
                        <td id="9_names">-</td>
                        <td><button id="9_button" onclick="join('9', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">10</th>
                        <td>Fast</td>
                        <td id="10_num">0</td>
                        <td id="10_names">-</td>
                        <td><button id="10_button" onclick="join('10', 'fast')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">11</th>
                        <td>Slow</td>
                        <td id="11_num">0</td>
                        <td id="11_names">-</td>
                        <td><button id="11_button" onclick="join('11', 'slow')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">12</th>
                        <td>Slow</td>
                        <td id="12_num">0</td>
                        <td id="12_names">-</td>
                        <td><button id="12_button" onclick="join('12', 'slow')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">13</th>
                        <td>Slow</td>
                        <td id="13_num">0</td>
                        <td id="13_names">-</td>
                        <td><button id="13_button" onclick="join('13', 'slow')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">14</th>
                        <td>Slow</td>
                        <td id="14_num">0</td>
                        <td id="14_names">-</td>
                        <td><button id="14_button" onclick="join('14', 'slow')">Join</button></td>
                    </tr>
                    <tr>
                        <th scope="row">15</th>
                        <td>Slow</td>
                        <td id="15_num">0</td>
                        <td id="15_names">-</td>
                        <td><button id="15_button" onclick="join('15', 'slow')">Join</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="mx-auto alert alert-info" role="alert">
        <p id="info"> Welcome to Singapore Mahjong Online! Please wait for the page to load before starting a game.</p>
        <hr>
        <p class="mb-0" id="tiles_left">This will display the number of tiles left before the end of the round.</p>
    </div>
    <script src="../static/game.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>
